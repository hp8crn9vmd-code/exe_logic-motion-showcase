var m=Object.defineProperty;var p=(n,e,t)=>e in n?m(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var o=(n,e,t)=>p(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();class f{constructor(){o(this,"themeMode","system");o(this,"motionMode","system");o(this,"currentTheme","light");o(this,"currentMotion",!1);o(this,"themeChangeCallbacks",[]);o(this,"motionChangeCallbacks",[]);o(this,"mediaQueryListeners",[]);o(this,"abortController",new AbortController);const e=localStorage.getItem("theme-mode"),t=localStorage.getItem("theme"),s=localStorage.getItem("motion-mode"),i=localStorage.getItem("motion");if(this.themeMode=e||"system",t&&this.themeMode==="user")this.currentTheme=t;else{const r=window.matchMedia("(prefers-color-scheme: dark)").matches;this.currentTheme=r?"dark":"light"}if(this.motionMode=s||"system",i&&this.motionMode==="user")this.currentMotion=i==="reduced";else{const r=window.matchMedia("(prefers-reduced-motion: reduce)").matches;this.currentMotion=r}this.applyTheme(),this.applyMotionPreference(),this.setupMediaQueryListeners()}setupMediaQueryListeners(){const e=this.abortController.signal,t=window.matchMedia("(prefers-color-scheme: dark)"),s=a=>{this.themeMode==="system"&&(this.currentTheme=a.matches?"dark":"light",this.applyTheme(),this.notifyThemeChange())};t.addEventListener("change",s,{signal:e});const i=window.matchMedia("(prefers-reduced-motion: reduce)"),r=a=>{this.motionMode==="system"&&(this.currentMotion=a.matches,this.applyMotionPreference(),this.notifyMotionChange())};i.addEventListener("change",r,{signal:e}),this.mediaQueryListeners.push(()=>t.removeEventListener("change",s),()=>i.removeEventListener("change",r))}applyTheme(){this.currentTheme==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}applyMotionPreference(){this.currentMotion?document.documentElement.classList.add("motion-disabled"):document.documentElement.classList.remove("motion-disabled")}toggleTheme(){this.themeMode="user",this.currentTheme=this.currentTheme==="light"?"dark":"light",localStorage.setItem("theme-mode","user"),localStorage.setItem("theme",this.currentTheme),this.applyTheme(),this.notifyThemeChange()}toggleMotion(){this.motionMode="user",this.currentMotion=!this.currentMotion,localStorage.setItem("motion-mode","user"),localStorage.setItem("motion",this.currentMotion?"reduced":"normal"),this.applyMotionPreference(),this.notifyMotionChange()}getTheme(){return this.currentTheme}getThemeMode(){return this.themeMode}getMotionPreference(){return this.currentMotion}getMotionMode(){return this.motionMode}onThemeChange(e){return this.themeChangeCallbacks.push(e),()=>{const t=this.themeChangeCallbacks.indexOf(e);t>-1&&this.themeChangeCallbacks.splice(t,1)}}onMotionChange(e){return this.motionChangeCallbacks.push(e),()=>{const t=this.motionChangeCallbacks.indexOf(e);t>-1&&this.motionChangeCallbacks.splice(t,1)}}notifyThemeChange(){this.themeChangeCallbacks.forEach(e=>e(this.currentTheme))}notifyMotionChange(){this.motionChangeCallbacks.forEach(e=>e(this.currentMotion))}cleanup(){this.abortController.abort(),this.themeChangeCallbacks=[],this.motionChangeCallbacks=[],this.mediaQueryListeners.forEach(e=>e()),this.mediaQueryListeners=[]}}const g=new f;class y{constructor(){o(this,"observers",new Map);o(this,"motionHandles",new Map);o(this,"prefersReducedMotion");o(this,"visibilityObserver");o(this,"resizeObservers",new Map);o(this,"cleanupCompleted",!1);o(this,"abortController",new AbortController);o(this,"onVisibilityChange",()=>{this.moduleContainers.forEach((e,t)=>{this.evaluateContainerPauseState(e,t)})});o(this,"onReducedMotionChange",e=>{this.prefersReducedMotion=e.matches,this.moduleContainers.forEach((t,s)=>{this.evaluateContainerPauseState(t,s)})});o(this,"boundCleanup",this.cleanup.bind(this));o(this,"reducedMotionQuery",window.matchMedia("(prefers-reduced-motion: reduce)"));o(this,"moduleContainers",new Map);o(this,"intersectionStates",new Map);this.prefersReducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches,this.visibilityObserver=new IntersectionObserver(e=>{e.forEach(t=>{const s=t.target,i=s.dataset.module;i&&(this.intersectionStates.set(i,t.isIntersecting),this.evaluateContainerPauseState(s,i))})},{threshold:.1,rootMargin:"50px"}),this.setupGlobalListeners()}setupGlobalListeners(){const e=this.abortController.signal;document.addEventListener("visibilitychange",this.onVisibilityChange,{signal:e}),this.reducedMotionQuery.addEventListener("change",this.onReducedMotionChange,{signal:e}),window.addEventListener("pagehide",this.boundCleanup,{signal:e}),window.addEventListener("beforeunload",this.boundCleanup,{signal:e})}evaluateContainerPauseState(e,t){!(this.intersectionStates.get(t)||!1)||document.hidden||this.prefersReducedMotion?(e.classList.add("animation-paused"),this.pauseAllAnimations(t)):(e.classList.remove("animation-paused"),this.playAllAnimations(t))}createInfiniteLoop(e,t,s,i){const r=t.animate(s,{...i,iterations:1/0});this.prefersReducedMotion&&r.pause();const a={play:()=>r.play(),pause:()=>r.pause(),cancel:()=>r.cancel(),element:t};return this.registerMotionHandle(e,a),a}createRAFHandle(e,t,s=!0){var a;let i=null;const r={play:()=>{if(!i&&!this.prefersReducedMotion){const l=()=>{t(),i=requestAnimationFrame(l)};i=requestAnimationFrame(l)}},pause:()=>{i&&(cancelAnimationFrame(i),i=null)},cancel:()=>{i&&(cancelAnimationFrame(i),i=null)}};return this.registerMotionHandle(e,r),s&&!this.prefersReducedMotion&&((a=r.play)==null||a.call(r)),r}observeElementForPausing(e,t){e.dataset.module=t,this.visibilityObserver.observe(e),this.moduleContainers.set(t,e),this.intersectionStates.set(t,!1)}registerResizeObserver(e,t,s){const i=new ResizeObserver(s);i.observe(e),this.resizeObservers.set(`${t}-resize`,i)}registerMotionHandle(e,t){this.motionHandles.has(e)||this.motionHandles.set(e,[]),this.motionHandles.get(e).push(t)}pauseAllAnimations(e){if(e){const t=this.motionHandles.get(e);t&&t.forEach(s=>{var i;return(i=s.pause)==null?void 0:i.call(s)})}else this.motionHandles.forEach(t=>{t.forEach(s=>{var i;return(i=s.pause)==null?void 0:i.call(s)})})}playAllAnimations(e){if(e){const t=this.motionHandles.get(e);t&&!this.prefersReducedMotion&&t.forEach(s=>{var i;return(i=s.play)==null?void 0:i.call(s)})}else this.prefersReducedMotion||this.motionHandles.forEach(t=>{t.forEach(s=>{var i;return(i=s.play)==null?void 0:i.call(s)})})}cleanupModule(e){const t=this.motionHandles.get(e);t&&(t.forEach(r=>{var a;return(a=r.cancel)==null?void 0:a.call(r)}),this.motionHandles.delete(e));const s=this.moduleContainers.get(e);s&&(this.visibilityObserver.unobserve(s),this.moduleContainers.delete(e)),this.intersectionStates.delete(e);const i=this.resizeObservers.get(`${e}-resize`);i&&(i.disconnect(),this.resizeObservers.delete(`${e}-resize`))}cleanup(){this.cleanupCompleted||(this.observers.forEach(e=>e.disconnect()),this.observers.clear(),this.visibilityObserver.disconnect(),this.resizeObservers.forEach(e=>e.disconnect()),this.resizeObservers.clear(),this.motionHandles.forEach(e=>{e.forEach(t=>{var s;return(s=t.cancel)==null?void 0:s.call(t)})}),this.motionHandles.clear(),this.moduleContainers.clear(),this.intersectionStates.clear(),document.removeEventListener("visibilitychange",this.onVisibilityChange),this.reducedMotionQuery.removeEventListener("change",this.onReducedMotionChange),window.removeEventListener("pagehide",this.boundCleanup),window.removeEventListener("beforeunload",this.boundCleanup),this.abortController.abort(),this.cleanupCompleted=!0)}}const c=new y,v={id:"kinetic-typography",title:"Kinetic Typography",description:"Baseline-aligned letter animations with precise timing",category:"Typography",init:n=>{n.innerHTML=`
            <div class="p-8 h-full flex items-center justify-center">
                <div class="text-center">
                    <div class="text-4xl font-bold tracking-tighter overflow-hidden">
                        <span class="kinetic-letter delay-50">S</span>
                        <span class="kinetic-letter delay-100">W</span>
                        <span class="kinetic-letter delay-150">I</span>
                        <span class="kinetic-letter delay-200">S</span>
                        <span class="kinetic-letter delay-250">S</span>
                    </div>
                    <div class="mt-4 text-lg text-gray-600 dark:text-gray-400">
                        <span class="animate-fade-in delay-300">Precision Type</span>
                    </div>
                </div>
            </div>
        `,n.classList.add("animation-paused")},destroy:()=>{}},M={id:"svg-stroke",title:"SVG Stroke Animation",description:"Vector path drawing with dasharray animation",category:"Vector",init:n=>{n.innerHTML=`
            <div class="p-8 h-full flex items-center justify-center">
                <svg class="w-48 h-48" viewBox="0 0 100 100">
                    <path
                        class="stroke-accent dark:stroke-accent-dark stroke-[0.5] fill-none"
                        d="M50,10 C70,10 90,30 90,50 C90,70 70,90 50,90 C30,90 10,70 10,50 C10,30 30,10 50,10 Z"
                        stroke-dasharray="300"
                        stroke-dashoffset="300"
                    />
                </svg>
            </div>
        `;const e=n.querySelector("path");e&&c.createInfiniteLoop("svg-stroke",e,[{strokeDashoffset:"300"},{strokeDashoffset:"0"}],{duration:2e3,easing:"ease-in-out"})},pause:()=>c.pauseAllAnimations("svg-stroke"),play:()=>c.playAllAnimations("svg-stroke"),destroy:()=>c.cleanupModule("svg-stroke")},b={id:"geometric-grid",title:"Geometric Grid",description:"Procedurally generated grid with cellular automata",category:"Grid",init:n=>{n.innerHTML=`
            <div class="p-4 h-full grid grid-cols-8 grid-rows-8 gap-1">
                ${Array.from({length:64}).map((e,t)=>`
                    <div class="geometric-cell delay-${t%8*50}"></div>
                `).join("")}
            </div>
        `,n.classList.add("animation-paused")},destroy:()=>{}},C={id:"wave-generator",title:"Wave Generator",description:"Sine wave superposition with interference patterns",category:"Physics",init:n=>{n.innerHTML=`
            <div class="p-4 h-full relative overflow-hidden">
                <div class="absolute inset-0 flex items-center justify-center">
                    ${Array.from({length:5}).map((e,t)=>`
                        <div class="absolute w-32 h-32 border-2 border-accent/30 dark:border-accent-dark/30 rounded-full opacity-20 animate-wave delay-${t*100}"></div>
                    `).join("")}
                </div>
            </div>
        `,n.classList.add("animation-paused")},destroy:()=>{}},w={id:"particle-field",title:"Particle Physics Field",description:"Brownian motion simulation with velocity vectors",category:"Physics",init:n=>{n.innerHTML=`
            <div class="p-4 h-full relative overflow-hidden" id="particle-container"></div>
        `;const e=30,t=[],s=n.querySelector("#particle-container");if(!s)return;s.classList.add("relative","w-full","h-full");for(let r=0;r<e;r++){const a=document.createElement("div");a.className="absolute w-1 h-1 bg-accent dark:bg-accent-dark rounded-full will-change-transform opacity-60",s.appendChild(a),t.push({el:a,x:Math.random()*100,y:Math.random()*100,vx:(Math.random()-.5)*2,vy:(Math.random()-.5)*2})}const i=()=>{const{width:r,height:a}=s.getBoundingClientRect();t.forEach(l=>{l.x+=l.vx,l.y+=l.vy,(l.x<0||l.x>r)&&(l.vx*=-1),(l.y<0||l.y>a)&&(l.vy*=-1),l.el.style.transform=`translate(${l.x}px, ${l.y}px)`})};c.createRAFHandle("particle-field",i),c.registerResizeObserver(s,"particle-field",()=>{t.forEach(r=>{r.x=Math.random()*s.clientWidth,r.y=Math.random()*s.clientHeight})})},pause:()=>c.pauseAllAnimations("particle-field"),play:()=>c.playAllAnimations("particle-field"),destroy:()=>c.cleanupModule("particle-field")},L={id:"moire-pattern",title:"Moire Pattern",description:"Interference patterns from rotating concentric circles",category:"Optical",init:n=>{n.innerHTML=`
            <div class="p-8 h-full flex items-center justify-center">
                <div class="relative w-48 h-48">
                    ${Array.from({length:8}).map((e,t)=>`
                        <div class="moire-ring absolute inset-0 m-auto w-${(t+1)*6} h-${(t+1)*6} animate-spin duration-${1e3+t*200} direction-${t%2===0?"normal":"reverse"}"></div>
                    `).join("")}
                </div>
            </div>
        `,n.classList.add("animation-paused")},destroy:()=>{}},k={id:"neon-grid",title:"Neon Grid",description:"Retro-futuristic grid with glow effects",category:"Grid",init:n=>{n.innerHTML=`
            <div class="p-4 h-full grid grid-cols-6 grid-rows-6 gap-2">
                ${Array.from({length:36}).map((e,t)=>`
                    <div class="neon-cell delay-${t%6*100} duration-1000"></div>
                `).join("")}
            </div>
        `,n.classList.add("animation-paused")},destroy:()=>{}},E={id:"binary-rain",title:"Binary Rain",description:"Matrix-style falling binary digits",category:"Typography",init:n=>{n.innerHTML=`
            <div class="p-4 h-full relative overflow-hidden font-mono text-sm">
                <div class="absolute inset-0 flex justify-around">
                    ${Array.from({length:20}).map(()=>`
                        <div class="flex flex-col items-center">
                            ${Array.from({length:30}).map(()=>`
                                <span class="text-accent dark:text-accent-dark opacity-0 animate-rain duration-${500+Math.random()*1e3}">${Math.random()>.5?"1":"0"}</span>
                            `).join("")}
                        </div>
                    `).join("")}
                </div>
            </div>
        `,n.classList.add("animation-paused")},destroy:()=>{}},x={id:"radial-loader",title:"Radial Loader",description:"Concentric loading indicators with phase offset",category:"UI",init:n=>{n.innerHTML=`
            <div class="p-8 h-full flex items-center justify-center">
                <div class="relative w-32 h-32">
                    ${Array.from({length:3}).map((e,t)=>`
                        <div class="radial-loader absolute inset-0 m-auto w-${(t+1)*20} h-${(t+1)*20} border-t-accent dark:border-t-accent-dark animate-spin duration-${1e3+t*300} delay-${t*100}"></div>
                    `).join("")}
                </div>
            </div>
        `,n.classList.add("animation-paused")},destroy:()=>{}},T={id:"infinite-scroll",title:"Infinite Scroll",description:"Seamlessly looping content with parallax layers",category:"UI",init:n=>{n.innerHTML=`
            <div class="p-4 h-full relative overflow-hidden">
                <div class="absolute inset-0 flex flex-col items-center space-y-8 animate-scroll">
                    ${Array.from({length:10}).map((e,t)=>`
                        <div class="w-48 h-12 bg-accent/10 dark:bg-accent-dark/10 rounded-lg flex items-center justify-center">
                            <span class="text-accent dark:text-accent-dark">Item ${t+1}</span>
                        </div>
                    `).join("")}
                </div>
            </div>
        `,n.classList.add("animation-paused")},destroy:()=>{}};class A{constructor(e){o(this,"container");o(this,"modules",new Map);o(this,"activeModules",new Set);this.container=e,this.registerAllModules(),this.renderGallery()}registerAllModules(){this.registerModule(v),this.registerModule(M),this.registerModule(b),this.registerModule(C),this.registerModule(w),this.registerModule(L),this.registerModule(k),this.registerModule(E),this.registerModule(x),this.registerModule(T)}registerModule(e){this.modules.set(e.id,e)}renderGallery(){this.container.innerHTML="",this.container.className="swiss-grid",this.modules.forEach((e,t)=>{const s=this.createModuleElement(e);this.container.appendChild(s),this.renderModule(t)})}createModuleElement(e){const t=document.createElement("div");return t.className="module-container col-span-12 md:col-span-6 lg:col-span-4",t.dataset.module=e.id,t}renderModule(e){const t=this.modules.get(e),s=this.container.querySelector(`[data-module="${e}"]`);!t||!s||(t.init(s),c.observeElementForPausing(s,e),this.activeModules.add(e))}destroyModule(e){const t=this.modules.get(e);t!=null&&t.destroy&&t.destroy(),c.cleanupModule(e),this.activeModules.delete(e)}getModules(){return Array.from(this.modules.values())}cleanup(){this.activeModules.forEach(e=>{this.destroyModule(e)}),this.activeModules.clear()}}let d=null;function h(){const n=document.getElementById("gallery-container");if(!n){console.error("Gallery container not found");return}d=new A(n),window.addEventListener("pagehide",u),window.addEventListener("beforeunload",u)}function u(){d&&(d.cleanup(),d=null),g.cleanup(),c.cleanup()}function S(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",h):h()}S();
